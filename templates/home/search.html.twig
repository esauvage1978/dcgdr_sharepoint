{% extends 'base.html.twig' %}

{% block title %} {{ parent() }} Recherche {% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ absolute_url( asset('plugins/datatables-bs4/css/dataTables.bootstrap4.css')) }}">
    <link rel="stylesheet"
          href="{{ absolute_url( asset('plugins/datatables-responsive/css/responsive.bootstrap4.min.css')) }}">
{% endblock %}

{% block body_header %}
    <div class="col">
            <h1 class="m-0 text-dark">Recherche sur le site </h1>
    </div>
    <div class="col">
        <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="{{ path('home') }}">Page d'accueil</a></li>
        </ol>
    </div>
{% endblock %}

{% block body %}

    {% if backpacks|length==0 and archivings | length ==0  and enables | length ==0 and rubrics | length ==0 and underrubrics | length ==0%}

        <div class="row bg-white shadow ">
            <div class="col-sm-4 ">
                <img src="{{ absolute_url( asset('img/nothing.jpg')) }}"
                     style="min-width:100%;
                        min-height:100%;
                        width:auto;
                        height:auto;" alt="nothing" />
            </div>
            <div class="col-sm-8 pr-4 pt-5">
                <div class="row justify-content-center ">
                    <h1 class="font-weight-bold  bg-white rounded"><b>DCGDR</b> Sharepoint</h1>
                </div>
                <div class="row justify-content-center ">

                    <span class="text-muted  bg-white rounded">Sharepoint de la DCGDR</span>
                </div>
                <br/>

                <div class="row justify-content-center">
                    <div class="col-6 m-5 bg-white rounded">
                        <h3><i class="fas fa-info-circle text-info"></i> Oops! rien trouvé pour cette recherche.</h3>

                        <p>
                            Rien dans les porte-documents, rubrique ou sous rubrique.
                            <br><br>
                            Cependant, vous pouvez <a href="{{ path('home') }}">retourner sur la page d'accueil</a> ou
                            relancer une recherche.
                        </p>
                        <form class="search-form" method="POST" action="{{ path('home_search') }}">
                            <div class="input-group ">
                                <input class="form-control " name="search" id="search" type="search"
                                       placeholder="Recherche" aria-label="Recherche">
                                <div class="input-group-append">
                                    <button class="btn btn-info" type="submit">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </form>

                    </div>

                </div>
            </div>
        </div>


    {% endif %}


    <div class="row" id="top">
        <div class="col-12">
                <div class=" p-0 pt-1">
                    <ul class="nav nav-tabs" id="custom-tabs-one-tab" role="tablist">
                        {%  if backpacks | length >0 %}
                        <li class="nav-item ">
                            <a class="nav-link active" id="custom-tabs-one-backpack-tab" data-toggle="pill" href="#custom-tabs-one-backpack" role="tab"
                               aria-controls="custom-tabs-one-backpack" aria-selected="true">
                                <i class="fas fa-suitcase text-info "></i> Porte-documents
                                <span class="badge badge-info">{{ backpacks | length }}</span>
                            </a>
                        </li>
                        {% endif %}
                        {%  if archivings | length >0 %}
                        <li class="nav-item ">
                            <a class="nav-link" id="custom-tabs-one-archiving-tab" data-toggle="pill" href="#custom-tabs-one-archiving" role="tab"
                               aria-controls="custom-tabs-one-archiving" aria-selected="true">
                                <i class="fas fa-archive text-yellow "></i> Porte-documents archivés
                                <span class="badge badge-info">{{ archivings | length }}</span>
                            </a>
                        </li>
                        {% endif %}
                        {%  if enables | length >0 %}
                            <li class="nav-item ">
                                <a class="nav-link" id="custom-tabs-one-enable-tab" data-toggle="pill" href="#custom-tabs-one-enable" role="tab"
                                   aria-controls="custom-tabs-one-enable" aria-selected="true">
                                    <i class="fas fa-archive text-yellow "></i> Porte-documents masqués
                                    <span class="badge badge-info">{{ enables | length }}</span>
                                </a>
                            </li>
                        {% endif %}
                        {%  if rubrics | length >0 %}
                        <li class="nav-item">
                            <a class="nav-link" id="custom-tabs-one-rubric-tab" data-toggle="pill" href="#custom-tabs-one-rubric" role="tab"
                               aria-controls="custom-tabs-one-rubric" aria-selected="false">
                                <i class="fas fa-box text-fuchsia"></i> Rubriques
                                <span class="badge badge-info">{{ rubrics | length }}</span>
                            </a>
                        </li>
                        {% endif %}
                        {%  if underrubrics | length >0 %}
                        <li class="nav-item">
                            <a class="nav-link" id="custom-tabs-one-underrubric-tab" data-toggle="pill" href="#custom-tabs-one-underrubric" role="tab"
                               aria-controls="custom-tabs-one-underrubric" aria-selected="false">
                                <i class="fas fa-boxes text-fuchsia"></i> Sous-rubriques
                                <span class="badge badge-info">{{ underrubrics | length }}</span>
                            </a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
                <div class=" mt-4">
                    <div class="tab-content" id="custom-tabs-one-tabContent">
                        <div class="tab-pane fade active show" id="custom-tabs-one-backpack" role="tabpanel" aria-labelledby="custom-tabs-one-backpack-tab">
                                {{ include('backpack/_view/_tree.html.twig',{open:true}) }}
                        </div>
                        <div class="tab-pane fade" id="custom-tabs-one-archiving" role="tabpanel" aria-labelledby="custom-tabs-one-archiving-tab">
                            {{ include('backpack/_view/_tree.html.twig',{backpacks:archivings,open:true}) }}
                        </div>
                        <div class="tab-pane fade" id="custom-tabs-one-enable" role="tabpanel" aria-labelledby="custom-tabs-one-enable-tab">
                            {{ include('backpack/_view/_tree.html.twig',{backpacks:enables,open:true}) }}
                        </div>
                        <div class="tab-pane fade" id="custom-tabs-one-rubric" role="tabpanel" aria-labelledby="custom-tabs-one-rubric-tab">
                            <div class="row col-12 d-flex align-items-stretch justify-content-center"  >
                                {% for rubric in rubrics %}
                                    <div class="col-sm-12 col-md-6 col-lg-3 col-xl-3  d-flex align-items-stretch" >
                                        {{ include('rubric/_view/_vignette.html.twig') }}
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="tab-pane fade" id="custom-tabs-one-underrubric" role="tabpanel" aria-labelledby="custom-tabs-one-underrubric-tab">
                            <div class="row col-12 d-flex align-items-stretch justify-content-center"  >
                                {% for underrubric in underrubrics %}
                                    <div class="col-sm-12 col-md-6 col-lg-3 col-xl-3  d-flex align-items-stretch" >
                                        {{ include('underrubric/_view/_vignette.html.twig') }}
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>

{% endblock %}


{% block javascripts %}
    <script src="{{ absolute_url( asset('plugins/datatables/jquery.dataTables.js')) }}"></script>
    <script src="{{ absolute_url( asset('plugins/datatables-bs4/js/dataTables.bootstrap4.js')) }}"></script>
    <script src="{{ absolute_url( asset('plugins/datatables-responsive/js/dataTables.responsive.min.js')) }}"></script>
    <script src="{{ absolute_url( asset('plugins/datatables-responsive/js/responsive.bootstrap4.min.js')) }}"></script>
    <script src="{{ absolute_url( asset('js/datatables/action.js')) }}"></script>
{% endblock %}
{% extends 'base.html.twig' %}

{% set title='Image de pr√©sentation' %}
{% set route_index='admin_picture_index' %}
{% set entityName='picture' %}
{% set entity=picture %}

{% block title %}{{ parent() }} {{ title }}{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ absolute_url( asset('plugins/select2/css/select2.min.css')) }}">
    <link rel="stylesheet"
          href="{{ absolute_url( asset('plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css')) }}">
    <!-- iCheck for checkboxes and radio inputs -->
    <link rel="stylesheet" href="{{ absolute_url( asset('plugins/icheck-bootstrap/icheck-bootstrap.min.css')) }}">
{% endblock %}

{% block body_header %}
    {{ include('admin/_body_header.html.twig', {domaine: title , id : entity.id, index : route_index}) }}
{% endblock %}

{% block sidebar_sommaire %}

{% endblock %}

{% block sidebar_button %}
    {% if is_granted('ROLE_GESTIONNAIRE') %}

        {{ include('share/__btn_save_onclick.html.twig') }}

        <span class="mb-3"></span>

        <span class="btn btn-danger " onclick="$('#delete').click();">
            <i class="fas fa-trash"></i> Supprimer
        </span>

    {% endif %}

    <span class="mb-3"></span>

    {{ include('share/__btn_return_show.html.twig',
        {   url:'admin_picture_show',
            id:entity.id
        }) }}

    <span class="mb-3"></span>

    {{ include('share/__btn_return_list.html.twig',
        {   url:route_index
        }) }}

{% endblock %}

{% block body %}

    {{ form_start(form) }}
    <div class="row justify-content-center">
        <div class="row col-12 ">
            <div id="col1"
                 class="col-sm-12  order-sm-second  col-md-12 order-sm-second col-lg-6 order-lg-second col-xl-2 order-xl-first ">
                <div class="shadow">
                    {{ include('picture/_edit/_afficher.html.twig') }}
                </div>
            </div>
            <div id="col2"
                 class=" col-sm-12  order-sm-first  col-md-12 order-md-first col-lg-12  order-lg-first col-xl-7 order-xl-second ">
                <div class="shadow bg-white pl-5 pr-5 pb-5">
                    {{ include('picture/_edit/_name.html.twig') }}
                </div>
                <div class="d-none">
                    <button name="update" id="update">{{ button_label|default('Save') }}</button>
                </div>
            </div>
            <div id="col3" class="col-sm-12 col-md-12 col-lg-6 col-xl-3 ">
                <div class="shadow">
                    {{ include('picture/_show/_picture.html.twig') }}
                </div>
            </div>

        </div>

    </div>

    <div class="d-none">
        {{ form_rest(form) }}
        {{ include('share/__btn_save.html.twig') }}
    </div>
    {{ form_end(form) }}
    <div class="d-none">
        {{ include('share/_delete_form.html.twig',{'domaine': 'admin_picture','id':picture.id}) }}
    </div>
{% endblock %}

{% block javascripts %}
    <!-- Select2 -->
    <script src="{{ absolute_url( asset('plugins/select2/js/select2.full.min.js')) }}"></script>
    <script src="{{ absolute_url( asset('js/add_sidebar.js')) }}"></script>
    <script type="text/javascript">
        $(function () {

            $(document).on('change', '.custom-file-input', function () {
                let fileName = $(this).val().replace(/\\/g, '/').replace(/.*\//, '');
                $(this).parent('.custom-file').find('.custom-file-label').text(fileName);
            });

            $('#picture_updateAt_date_month').val(new Date().getMonth());
            $('#picture_updateAt_date_day').val(new Date().getDay());
            $('#picture_updateAt_date_year').val(new Date().getFullYear());
            $('#picture_updateAt_time_hour').val(new Date().getHours());
            $('#picture_updateAt_time_minute').val(new Date().getMinutes());


        })
    </script>
{% endblock %}

